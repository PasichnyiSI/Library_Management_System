# Library Management System

Цей проєкт — система управління бібліотекою, побудована на **FastAPI**, **PostgreSQL** та **Docker**. Проєкт використовує **Alembic** для міграцій бази даних та **Uvicorn** для запуску серверу.

## Вимоги

1. **Docker** (для контейнеризації)
2. **Docker Compose** (для зручного запуску сервісів)
3. **Python 3.13+** (для локальної розробки та тестування)
4. **.env файл** для налаштування змінних середовища

## Структура Проєкту

Проєкт складається з кількох основних частин:

- `app/`: Основна частина програми, яка містить всю логіку.
  - `main.py`: Головний файл, що ініціалізує FastAPI додаток.
  - `database.py`: Містить налаштування для підключення до бази даних.
  - `models.py`: Опис моделей для бази даних (наприклад, книги, користувачі).
  - `schemas.py`: Визначає схеми для обміну даними (наприклад, Pydantic моделі).
  - `utils.py`: Містить процеси створення токену доступу та шифрування пароля.
- `routers/`: Частина програми, яка містить всі API-методи.
  - `books.py`: Містить маршрути, які обробляють запити для управління книгами в системі.
  - `authors.py`: Містить маршрути, які обробляють запити для управління авторами в системі.
  - `genres.py`: Містить маршрути, які обробляють запити для управління жанрами в системі.
  - `publishers.py`: Містить маршрути, які обробляють запити для управління видавництвами в системі.
  - `borrowers.py`: Містить маршрути, які обробляють запити для управління читачів в системі.
  - `borrowing_history.py`: Містить маршрути, які обробляють запити для управління записами взятих книжок в системі.
  - `auth.py`: Містить маршрути, які обробляють запити для управління автентифікацією в системі.
- `tests/`: Частина програми, яка містить всі тести.
- `Dockerfile`: Налаштування для Docker.
- `docker-compose.yml`: Налаштування для Docker Compose.
- `requirements.txt`: Список залежностей Python для проєкту.
- `openapi.json`: Згенерований файл документації OpenAPI у форматі JSON.
- `openapi.yaml`: Згенерований файл документації OpenAPI у форматі YAML.

## Налаштування середовища

### Крок 1: Клонування репозиторію

Спочатку клонувати репозиторій на вашу локальну машину:

```bash
git clone https://github.com/yourusername/library-management-system.git
cd library-management-system
```
### Крок 2: Налаштування Docker середовища

У репозиторії вже є налаштування для Docker та Docker Compose, тому ви можете легко налаштувати середовище для запуску всіх необхідних контейнерів.

### Крок 3: Створення та запуск контейнерів

Запустіть Docker Compose, щоб створити та запустити контейнери для вашого додатку та бази даних:

```bash
docker-compose up --build
```
Ця команда автоматично створить два контейнери:
 - library_db: Контейнер з базою даних PostgreSQL.
 - library_app: Контейнер для вашого FastAPI додатку.

### Крок 4: Налаштування середовища (файл .env)

Створіть файл .env в корені проєкту і додайте наступні змінні середовища:
```env
DATABASE_URL_lms=postgres://library_user:library_password@db:5432/library_db

SECRET_KEY=mysecretkey
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
```
Ці змінні використовуються для налаштування підключення до бази даних та параметрів аутентифікації.

### Крок 5: Міграції бази даних

Щоб застосувати міграції до вашої бази даних, використовуйте Alembic. Спочатку потрібно запустити контейнер для виконання міграцій:

```bash
docker-compose exec app alembic upgrade head
```
Це застосує останні міграції бази даних.

## Взаємодія з API

Swagger UI автоматично генерується і надається для вашого FastAPI додатку. Після запуску сервера, ви можете отримати доступ до документації API за адресою:

```bash
http://localhost:8000/docs
```

Документація дозволяє вам тестувати кінцеві точки API безпосередньо через інтерфейс браузера.

- GET /books: Отримати список всіх книг.
- POST /books: Додати нову книгу.
- GET /books/{book_id}: Отримати деталі конкретної книги за її ID.
- PUT /books/{book_id}: Оновити дані книги.
- DELETE /books/{book_id}: Видалити книгу.

## Тестування

Проєкт використовує pytest для тестування. Щоб запустити тести, виконайте наступну команду:

```bash
docker-compose exec app pytest
```

Це запустить всі тести, визначені у вашому проєкті, і виведе результат у термінал.





